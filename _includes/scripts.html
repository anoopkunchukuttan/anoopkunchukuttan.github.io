<script src="{{ base_path }}/assets/js/main.min.js"></script>

{% include analytics.html %}

<!-- CUSTOM: Adding custom scripts for each page reading the list in include_script in the header -->
<!-- Based on this blog: https://nathenry.com/writing/2020-10-05-scripts-jekyll.html#:~:text=One%20of%20the%20useful%20features,markdownify%20command%2C%20which%20strips%20Javascript.-->

<!-- {% if page.include_scripts %}
  {% for include_script in page.include_scripts %}
    <script src='{{ base_path }}/{{ include_script }}'></script>
  {% endfor %}
{% endif %} -->

<script>
    function filterList(keyword) {
        let items = document.querySelectorAll('.publication-item');
        let years = document.querySelectorAll('.year-header');
        let visibleYears = new Set();
        
        items.forEach(item => {
            let classes = item.className.split(" ");
            if (keyword === 'all' || classes.includes(keyword.replace(" ", "_"))) {
                item.style.display = '';
                visibleYears.add(classes[classes.length - 1]); // Capture the year class
            } else {
                item.style.display = 'none';
            }
        });
        
        years.forEach(year => {
            let yearClass = year.classList[1];
            if (visibleYears.has(yearClass)) {
                year.style.display = '';
            } else {
                year.style.display = 'none';
            }
        });
    }
</script>
